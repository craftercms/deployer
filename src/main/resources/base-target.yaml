####################################################
##          BASE TARGET CONFIGURATION FILE        ##
####################################################

target:
  # The local folder path where the target repository will be placed
  localRepoPath: ${deployer.main.deployments.folderPath}/${target.env}/${target.siteName}
  # The default datetime pattern that will be used
  defaultDateTimePattern: MM/dd/yyyy hh:mm:ss.SSS a z
  deployment:
    scheduling:
      # If scheduling of target deployments is enabled
      enabled: true
      # The cron expression used for scheduling target deployments
      cron: '0 * * * * *'
  search:
    tika:
      # Limit of words to be parsed from binary files
      limit: 10000
    elasticSearch:
      settings:
        # JSON file containing the settings for authoring indexes
        authoring: 'classpath:crafter/elasticsearch/default-index-settings.json'
        # JSON file containing the settings for preview indexes
        preview: 'classpath:crafter/elasticsearch/default-index-settings.json'
      # List of URLs for ElasticSearch
      urls:
        - http://localhost:9201
    # Indicates if Solr should be used instead of ElasticSearch
    useSolr: false
    # The base URL of the Crafter Search server
    serverUrl: http://localhost:8080/crafter-search
    indexing:
      xml:
        flattening:
          # If XML flattening should be done when indexing XML
          enabled: true
          # The XPath Query for the include element
          includeElementXPathQuery: //include
          # The XPath Query for the node that indicates a particular include is disabled
          disabledIncludeNodeXPathQuery: ../disableFlattening
          # The regex used to detect pages during flattening and avoid there inclusion
          pagesPathPattern: "^/?site/website/.*$"
          # If the include tags should be removed when flattening. Don't set to true if you want pages/components
          # to be re-reindex when one of their children is being updated
          removeIncludeTags: false
        merging:
          # If XML merging should be done when indexing XML
          enabled: true
        # The regex patterns of the XML files that should be included for indexing
        includePatterns:
          - ^/?site/.+\.xml$
      binary:
        # The list of binary file mime types that should be indexed
        supportedMimeTypes:
          - application/pdf
          - application/msword
          - application/vnd.openxmlformats-officedocument.wordprocessingml.document
          - application/vnd.ms-excel
          - application/vnd.ms-powerpoint
          - application/vnd.openxmlformats-officedocument.presentationml.presentation
        # The regex path patterns for the metadata ("jacket") files of binary/document files
        metadataPathPatterns:
          - ^/?site/documents/.+\.xml$
        # The regex path patterns for binary/document files that are store remotely
        remoteBinaryPathPatterns: &remoteBinaryPathPatterns
          # HTTP/HTTPS URLs are only indexed if they contain the protocol (http:// or https://). Protocol relative
          # URLs (like //mydoc.pdf) are not supported since the protocol is unknown to the back-end indexer.
          - ^(http:|https:)//.+$
          - ^/remote-assets/.+$
        # The regex path patterns for binary/document files that should be associated to just one metadata file and are
        # dependant on that parent metadata file, so if the parent is deleted the binary should be deleted from the index
        childBinaryPathPatterns: *remoteBinaryPathPatterns
        # The XPaths of the binary references in the metadata files
        referenceXPaths:
          - //item/key
          - //item/url
        # The maximum file size in bytes to index
        maxFileSize: 104857600
        # Setting specific for authoring indexes
        authoring:
          # Same as for delivery but include images and videos
          supportedMimeTypes:
            - application/pdf
            - application/msword
            - application/vnd.openxmlformats-officedocument.wordprocessingml.document
            - application/vnd.ms-excel
            - application/vnd.ms-powerpoint
            - application/vnd.openxmlformats-officedocument.presentationml.presentation
            - image/*
            - video/*
            - text/*
          # Look into all XML descriptors to index all binary files referenced
          metadataPathPatterns:
            - ^/?site/.+\.xml$
          # Include all fields marked as remote resources (S3, Box, CMIS)
          referenceXPaths:
            - //item/key
            - //item/url
            - //*[@remote="true"]
  notifications:
    mail:
      server:
        # The hostname of the mail server used to send notifications
        host: localhost
        # The port of the mail server used to send notifications
        port: 25
      # The mail protocol used on notifications
      protocol: smtp
      # The character encoding used on emails
      encoding: UTF-8
      templates:
        # The location (Spring URL) of  the mail templates
        location: classpath:templates/mail
        # The override location (Spring URL) of  the mail templates
        overrideLocation: file:${deployer.main.config.folderPath}/templates/mail
        # The name of the default mail template
        default: default
        # The suffix used to resolve the final name of a mail template
        suffix: -mail-template.ftl
      # The from field to use in the emails
      from: noreply@example.com
      # The subject field to use in the emails
      subject: Deployment Report
      # If emails should be HTML emails
      html: true
      # For which status should the notifications be sent
      status: ON_ANY_STATUS
  config:
    profiles:
      aws:
        # The path for the AWS configuration profile in the local repo
        path: /config/studio/aws/aws.xml
      box:
        # The path for the Box configuration profile in the local repo
        path: /config/studio/box/box.xml